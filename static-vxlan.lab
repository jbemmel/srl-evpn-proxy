name: static-vxlan-lab

topology:
  nodes:
    cumulus:
      kind: cvx
      image: networkop/cx:4.3.0
      binds:
        - cumulus_interfaces:/etc/network/interfaces.d/host-mounts
        - cumulus_bridge.json:/etc/network/ifupdown2/policy.d/bridge.json

    srl1:
      kind: srl
      # image: ghcr.io/nokia/srlinux:latest
      image: srl/custombase:latest
      startup-config: srl1.conf.json
    srl2:
      kind: srl
      # image: ghcr.io/nokia/srlinux:latest
      image: srl/custombase:latest
      startup-config: srl2.conf.json

  links:
    # Start with EVPN VXLAN between SRL nodes
    - endpoints: ["srl1:e1-1", "srl2:e1-1"]

    # Add static VXLAN to Cumulus, advertised by srl2 (with modified next hop)
    - endpoints: ["cumulus:swp12", "srl1:e1-2"]
